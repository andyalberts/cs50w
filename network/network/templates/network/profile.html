{% extends "network/layout.html" %}
{% load static %}

{% block body %}
<!-- Make Giant Page Card-->
<!--Profile Pic (make model or a default) -->
<!-- username -->
<!-- follow button (exclude if on current.user's profile)-->
<!-- # of followers -->
<!-- # of follows -->
<!-- posts loop from context ?:append here or view?  -->
<div class="profile-header">
    <p>{{ target_user }}</p>
    {% if target_user != logged_in %}
        {% if user.is_authenticated %}
            {% if is_following %}
                <button class="followButton" onclick="followUser(event,'{{ target_user.id }}')">Following</button>
            {% else %}
                <button class="followButton" onclick="followUser(event,'{{ target_user.id }}')">Follow</button>
            {% endif %}
        <!-- toggle message for follow/unfollow-->
        {% endif %}

    {% endif %}
    <p>Followers: {{ followers }}</p>
    <p>Following: {{ following }}</p>
</div>
<div>
    {% for post in posts %}
    <div class="card postcard mb-3" id="post-{{ post.id }}" >
        <div class="card-body">
        <h1><a href="/profile/{{ post.user.id }}"> {{ post.user.username }}</a></h1>
        <p class="post-text">{{ post.text }}</p>
        <div class="edit-area mt-3 d-none">
        <textarea class="form-control mb-2">{{ post.text }}</textarea>
        <button class="btn btn-success save-post" data-post-id="{{ post.id }}">Save</button>
        </div>
        <p>{{ post.timestamp }}</p>
        <p id="like-count-{{ post.id }}" >{{ post.likes.count }} Likes</p>
        <button class="btn btn-secondary  like-button" id="like-button-{{ post.id }}" data-post-id="{{ post.id }}" >like</button>
        <button class="btn btn-secondary edit-post " data-post-id="{{ post.id }}" >Edit</button>
        </div>
        </div>
    {% endfor %}
</div>
{% endblock %}

{% block script %}
    <script src="{% static 'network/index.js' %}"></script>
{% endblock %}